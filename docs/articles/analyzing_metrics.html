<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="This vignette shows how to use tntpmetric to quickly calculate average scores on common metrics given a raw data set. These calculations can be used  directly for goal reporting. It uses fake student survey data as an example to walk through all the possible analyses: calculating a metric score at a single timepoint, growth over time, and differences between subgroups.
">
<title>Analyzing TNTP Common Metrics • tntpmetrics</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analyzing TNTP Common Metrics">
<meta property="og:description" content="This vignette shows how to use tntpmetric to quickly calculate average scores on common metrics given a raw data set. These calculations can be used  directly for goal reporting. It uses fake student survey data as an example to walk through all the possible analyses: calculating a metric score at a single timepoint, growth over time, and differences between subgroups.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tntpmetrics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/metric_overview.html">Overview of Creating Metrics</a>
    <a class="dropdown-item" href="../articles/teacher_expectations.html">High Expectations</a>
    <a class="dropdown-item" href="../articles/assignments.html">Grade-Appropriate Assignments</a>
    <a class="dropdown-item" href="../articles/observation_tool.html">Observations</a>
    <a class="dropdown-item" href="../articles/student_surveys.html">Student Surveys</a>
    <a class="dropdown-item" href="../articles/sample_implicit.html">Sampling for Common Metrics</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Analyzing TNTP Common Metrics</h1>
                        <h4 data-toc-skip class="author">Adam Maier</h4>
            
      
      
      <div class="d-none name"><code>analyzing_metrics.Rmd</code></div>
    </div>

    
    
<p>TNTP uses common metrics to learn from the work project teams are doing. By using similar metrics across different projects, TNTP teams are better able to track their progress reliably and coordinate work across contexts. Common metrics also serve as the core of organization-wide goals. Though nearly all projects are using common metrics somewhere in their work, collecting common data does not guarantee each project will score or aggregate the metrics similarly. And despite scoring guidance, using valuable analyst time to walk through the steps to calculate metrics, or score teams’ goals is not ideal.</p>
<p>The <code>tntpmetrics</code> package includes three handy functions that start with raw, project-collected data and calculate individual common metric scores, summarize average common metrics scores for an entire project, compare common metric scores between (typically student sub-) groups, and analyze changes in metric scores over time. Most of the work of these functions is checking for potential errors or inconsistencies in the data – such as data not being on the proper scale, or missing but needed variables. These functions attempt to anticipate all of the potential issues that could occur between collecting raw data and calculating simple means from it. This document shows you how to use these three functions.</p>
<div class="section level2">
<h2 id="current-available-metrics">Current available metrics<a class="anchor" aria-label="anchor" href="#current-available-metrics"></a>
</h2>
<p>Currently, <code>tntpmetrics</code> has functions to calculate and work with the following common metrics:</p>
<ul>
<li>
<strong>Student surveys:</strong> Engagement, Relevance, and Belonging</li>
<li>
<strong>Observation tools:</strong> IPG and TNTP Core</li>
<li>
<strong>Teacher and leader surveys:</strong> Expectations (both the current items and the older items)</li>
<li>
<strong>Assignments:</strong> Grade-Appropriate Assignments</li>
</ul>
</div>
<div class="section level2">
<h2 id="practice-data-sets-ss_data_initial-ss_data_final-and-ipg_data">Practice Data Sets: ss_data_initial, ss_data_final, and ipg_data<a class="anchor" aria-label="anchor" href="#practice-data-sets-ss_data_initial-ss_data_final-and-ipg_data"></a>
</h2>
<p>To demonstrate how to apply the common metric functions in <code>tntpmetrics</code>, we will use two sets of fake student survey data. The data contains 1,000 student survey responses from 26 classes at the beginning of a project (<code>ss_data_initial.rda</code>) and another 1,000 student survey responses from the same 26 classes at the end of the project (<code>ss_data_final.rda</code>).</p>
<p>This data automatically comes with the <code>tntpmetrics</code> package. Both data sets have the same variable/column names, which include a value for each survey question from the <em>Engagement</em>, <em>Relevance</em>, and <em>Belonging</em> constructs. Specifically, these metrics are based on the following survey items:</p>
<ul>
<li>Engagement
<ul>
<li>eng_interest (“<em>What we were learning was interesting.</em>”)</li>
<li>eng_like (“<em>I liked what we did in class.</em>”)</li>
<li>eng_losttrack (“<em>I was so into what we were learning I lost track of time.</em>”)</li>
<li>eng_moreabout (“<em>I thought more about what we were learning than anything else.</em>”)</li>
</ul>
</li>
<li>Relevance (“<em>We spend time in class on things that…</em>”)
<ul>
<li>rel_asmuch (“<em>Will help me learn just as much as kids in other schools.</em>”)</li>
<li>rel_future (“<em>Are important to my future goals.</em>”)</li>
<li>rel_outside (“<em>I can use outside of school.</em>”)</li>
<li>rel_rightnow (“<em>Are important to my life right now.</em>”)</li>
</ul>
</li>
<li>Belonging
<ul>
<li>bel_ideas (“<em>In this class, my ideas really count.</em>”)</li>
<li>tch_interestedideas (“<em>In this class, my teacher is interested in my ideas.</em>”)</li>
<li>bel_fitin (“<em>In this class, I feel like I fit in.</em>”)</li>
<li>tch_problem (“<em>I could talk to my teacher for this class if I had a problem.</em>”)</li>
</ul>
</li>
</ul>
<p>These surveys items take on values of 0 (for Not True), 1 (for A Little True), 2 (for Mostly True), or 3 (for Very True). Also in the data is a class ID, and two demographic categorical character variables associated with each class.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ss_data_initial</span><span class="op">)</span>
<span class="co">#&gt;   class_id response_id class_frl_cat class_soc_cat bel_fitin bel_ideas</span>
<span class="co">#&gt; 1        A           3 Under 50% FRL     0-25% SOC         3         3</span>
<span class="co">#&gt; 2        A          39 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt; 3        A          73 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt; 4        A          84 Under 50% FRL     0-25% SOC         2         3</span>
<span class="co">#&gt; 5        A          85 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt; 6        A          94 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt;   eng_interest eng_like eng_losttrack eng_moreabout rel_asmuch rel_future</span>
<span class="co">#&gt; 1            2        2             2             2          2          2</span>
<span class="co">#&gt; 2            2        3             2             2          2          3</span>
<span class="co">#&gt; 3            2        2             2             2          2          2</span>
<span class="co">#&gt; 4            2        2             2             2          2          3</span>
<span class="co">#&gt; 5            2        3             2             2          2          2</span>
<span class="co">#&gt; 6            2        2             2             2          3          2</span>
<span class="co">#&gt;   rel_outside rel_rightnow tch_interestedideas tch_problem</span>
<span class="co">#&gt; 1           2            2                   2           2</span>
<span class="co">#&gt; 2           2            2                   2           2</span>
<span class="co">#&gt; 3           2            2                   2           3</span>
<span class="co">#&gt; 4           2            2                   2           2</span>
<span class="co">#&gt; 5           2            2                   2           2</span>
<span class="co">#&gt; 6           2            2                   3           2</span></code></pre></div>
<p>Because of the additional needed variables to use these functions with IPG data, we will also practice with the fake observation data <code>ipg_data.rda</code>. This data automatically comes with the <code>tntpmetrics</code> package. The data contains 100 observations using the IPG. All four subjects are represented.</p>
</div>
<div class="section level2">
<h2 id="calculating-common-metrics">Calculating Common Metrics<a class="anchor" aria-label="anchor" href="#calculating-common-metrics"></a>
</h2>
<p><code>tntpmetrics</code> contains a simple function called <code>make_metric</code> to attach a new column/variable to your data with the value of the scored common metric. The new column will always have the prefix <code>cm_</code> followed by the name of the metric. For example, the <em>engagement</em> metric is simply the sum of the four engagement survey items. To use <code>make_metric</code>, simply provide the data set you want to use, and the metric you want calculated, making sure to put the latter in quotes. The result is your data but with new variable <code>cm_engagement</code>. The function also tells you how many rows of data did not have a construct created because at least one of the survey items was missing.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ss_data_initial</span>, metric <span class="op">=</span> <span class="st">"engagement"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">response_id</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"eng_"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"cm_"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "6 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt;   response_id eng_interest eng_like eng_losttrack eng_moreabout cm_engagement</span>
<span class="co">#&gt; 1           3            2        2             2             2             8</span>
<span class="co">#&gt; 2          39            2        3             2             2             9</span>
<span class="co">#&gt; 3          73            2        2             2             2             8</span>
<span class="co">#&gt; 4          84            2        2             2             2             8</span>
<span class="co">#&gt; 5          85            2        3             2             2             9</span>
<span class="co">#&gt; 6          94            2        2             2             2             8</span>
<span class="co">#&gt;   cm_binary_engagement</span>
<span class="co">#&gt; 1                 TRUE</span>
<span class="co">#&gt; 2                 TRUE</span>
<span class="co">#&gt; 3                 TRUE</span>
<span class="co">#&gt; 4                 TRUE</span>
<span class="co">#&gt; 5                 TRUE</span>
<span class="co">#&gt; 6                 TRUE</span></code></pre></div>
<div class="section level3">
<h3 id="binary-version-of-common-metric">Binary version of common metric<a class="anchor" aria-label="anchor" href="#binary-version-of-common-metric"></a>
</h3>
<p>Note that in the above, there were <strong>two</strong> new variables created: <code>cm_engagement</code> and <code>cm_binary_engagement</code>. For many common metrics, there is a cut-point on the metric scale above which, scores take on a special meaning. For engagement, for example, scores of 8 or above imply that the student in that particular response was “engaged”. The variable <code>cm_binary_engagement</code> will be <code>TRUE</code> if the engagement score is above this cut-point and FALSE if not. For most common metrics, the guidance is to set goals around the actual metric score, not the binary version, as the binary version reduces the nuance of the data. However, we know teams are interested in these binary classifications to <code>cm_binary_</code> variables are always created when you run <code>make_metric</code> as long as the metric has a defined cut-point. (The metric tntpcore does not have a defined cut-point.)</p>
</div>
<div class="section level3">
<h3 id="checking-for-common-errors">Checking for common errors<a class="anchor" aria-label="anchor" href="#checking-for-common-errors"></a>
</h3>
<p><code>make_metric</code> automatically checks for the most common data issues.</p>
<div class="section level4">
<h4 id="misspelled-variables">Misspelled Variables<a class="anchor" aria-label="anchor" href="#misspelled-variables"></a>
</h4>
<p>First, it requires that the data have the variable names spelled exactly as above. There is nothing special about these variable names, and the function had to choose some as the default. If your data has the variable names spelled differently, then you’ll have to change them before using <code>make_metric</code>. Otherwise, you’ll get an error:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ss_data_initial</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>eng_interest_wrongspelling <span class="op">=</span> <span class="va">eng_interest</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"engagement"</span><span class="op">)</span>
<span class="co">#&gt; Error: Data set data is missing the following variable(s): eng_interest </span>
<span class="co">#&gt;  Make sure spelling is correct.</span></code></pre></div>
<p>Which variable names are needed for each metric can always be found by typing <code><a href="../reference/make_metric.html">? make_metric</a></code>; they are also detailed later in this vignette.</p>
</div>
<div class="section level4">
<h4 id="items-on-the-wrong-scale">Items on the wrong scale<a class="anchor" aria-label="anchor" href="#items-on-the-wrong-scale"></a>
</h4>
<p>Second, <code>make_metric</code> will check each item to ensure it’s on the expected scale. For student survey items, it expects the scale of 0-3 outlined above. If any data value is outside of this scale, you’ll get an error telling you which variables are out of scale and the proper scale on which they should be:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ss_data_initial</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
    eng_interest <span class="op">=</span> <span class="va">eng_interest</span> <span class="op">+</span> <span class="fl">1</span>,
    eng_like <span class="op">=</span> <span class="va">eng_like</span> <span class="op">-</span> <span class="fl">1</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"engagement"</span><span class="op">)</span>
<span class="co">#&gt; Error: In data the following variable(s) have a value out of scale: </span>
<span class="co">#&gt;  eng_like, eng_interest </span>
<span class="co">#&gt;  They should only take values of 0, 1, 2, 3</span></code></pre></div>
<p>You will also get an error if your scales are not numeric:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ss_data_initial</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
    eng_interest <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span>
        <span class="va">eng_like</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="st">"Not True"</span>,
        <span class="va">eng_like</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"A Little True"</span>,
        <span class="va">eng_like</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Mostly True"</span>,
        <span class="va">eng_like</span> <span class="op">==</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"Very True"</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"engagement"</span><span class="op">)</span>
<span class="co">#&gt; Error: In data the following variable(s) have a value out of scale: </span>
<span class="co">#&gt;  eng_interest </span>
<span class="co">#&gt;  They should only take values of 0, 1, 2, 3</span></code></pre></div>
<p>The scales needed for each metric are detailed later in this vignette.</p>
</div>
<div class="section level4">
<h4 id="optional-censored-scale-use">(Optional) Censored scale use<a class="anchor" aria-label="anchor" href="#optional-censored-scale-use"></a>
</h4>
<p>There are times where items may be on the wrong scale, but in a way that is undetectable. For example, what if the student survey data was provided to you with each item on a scale of 1-4, but because students never responded “Very True”, the data only actually has values of 1-3. Values of 1-3 are all <em>in scale</em> for student surveys, so that the preceding error will not occur. To account for this, <code>make_metric</code> automatically checks that each possible value on the scale is used and gives you a warning if that is not the case by indicating the affected variables and which value(s) they did not use:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ss_data_initial</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eng_interest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">eng_interest</span> <span class="op">==</span> <span class="fl">0</span>, <span class="cn">NA</span>, <span class="va">eng_interest</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"engagement"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Warning: Not all the possible values for each variable were used in data The following variables did NOT use the following values: </span>
<span class="co">#&gt;  eng_interest: 0 </span>
<span class="co">#&gt;  This is not an error, but you should confirm that all values are on the scale: 0, 1, 2, 3</span>
<span class="co">#&gt; [1] "199 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt;   class_id response_id class_frl_cat class_soc_cat bel_fitin bel_ideas</span>
<span class="co">#&gt; 1        A           3 Under 50% FRL     0-25% SOC         3         3</span>
<span class="co">#&gt; 2        A          39 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt; 3        A          73 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt; 4        A          84 Under 50% FRL     0-25% SOC         2         3</span>
<span class="co">#&gt; 5        A          85 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt; 6        A          94 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt;   eng_interest eng_like eng_losttrack eng_moreabout rel_asmuch rel_future</span>
<span class="co">#&gt; 1            2        2             2             2          2          2</span>
<span class="co">#&gt; 2            2        3             2             2          2          3</span>
<span class="co">#&gt; 3            2        2             2             2          2          2</span>
<span class="co">#&gt; 4            2        2             2             2          2          3</span>
<span class="co">#&gt; 5            2        3             2             2          2          2</span>
<span class="co">#&gt; 6            2        2             2             2          3          2</span>
<span class="co">#&gt;   rel_outside rel_rightnow tch_interestedideas tch_problem cm_engagement</span>
<span class="co">#&gt; 1           2            2                   2           2             8</span>
<span class="co">#&gt; 2           2            2                   2           2             9</span>
<span class="co">#&gt; 3           2            2                   2           3             8</span>
<span class="co">#&gt; 4           2            2                   2           2             8</span>
<span class="co">#&gt; 5           2            2                   2           2             9</span>
<span class="co">#&gt; 6           2            2                   3           2             8</span>
<span class="co">#&gt;   cm_binary_engagement</span>
<span class="co">#&gt; 1                 TRUE</span>
<span class="co">#&gt; 2                 TRUE</span>
<span class="co">#&gt; 3                 TRUE</span>
<span class="co">#&gt; 4                 TRUE</span>
<span class="co">#&gt; 5                 TRUE</span>
<span class="co">#&gt; 6                 TRUE</span></code></pre></div>
<p>Because this is not technically an error, you can turn off this default warning by setting <code>scaleusewarning = F</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ss_data_initial</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eng_interest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">eng_interest</span> <span class="op">==</span> <span class="fl">0</span>, <span class="cn">NA</span>, <span class="va">eng_interest</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"engagement"</span>, scaleusewarning <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "199 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt;   class_id response_id class_frl_cat class_soc_cat bel_fitin bel_ideas</span>
<span class="co">#&gt; 1        A           3 Under 50% FRL     0-25% SOC         3         3</span>
<span class="co">#&gt; 2        A          39 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt; 3        A          73 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt; 4        A          84 Under 50% FRL     0-25% SOC         2         3</span>
<span class="co">#&gt; 5        A          85 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt; 6        A          94 Under 50% FRL     0-25% SOC         2         2</span>
<span class="co">#&gt;   eng_interest eng_like eng_losttrack eng_moreabout rel_asmuch rel_future</span>
<span class="co">#&gt; 1            2        2             2             2          2          2</span>
<span class="co">#&gt; 2            2        3             2             2          2          3</span>
<span class="co">#&gt; 3            2        2             2             2          2          2</span>
<span class="co">#&gt; 4            2        2             2             2          2          3</span>
<span class="co">#&gt; 5            2        3             2             2          2          2</span>
<span class="co">#&gt; 6            2        2             2             2          3          2</span>
<span class="co">#&gt;   rel_outside rel_rightnow tch_interestedideas tch_problem cm_engagement</span>
<span class="co">#&gt; 1           2            2                   2           2             8</span>
<span class="co">#&gt; 2           2            2                   2           2             9</span>
<span class="co">#&gt; 3           2            2                   2           3             8</span>
<span class="co">#&gt; 4           2            2                   2           2             8</span>
<span class="co">#&gt; 5           2            2                   2           2             9</span>
<span class="co">#&gt; 6           2            2                   3           2             8</span>
<span class="co">#&gt;   cm_binary_engagement</span>
<span class="co">#&gt; 1                 TRUE</span>
<span class="co">#&gt; 2                 TRUE</span>
<span class="co">#&gt; 3                 TRUE</span>
<span class="co">#&gt; 4                 TRUE</span>
<span class="co">#&gt; 5                 TRUE</span>
<span class="co">#&gt; 6                 TRUE</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="required-column-names-and-scales-for-each-common-metric">Required column names and scales for each common metric<a class="anchor" aria-label="anchor" href="#required-column-names-and-scales-for-each-common-metric"></a>
</h3>
<p>Below are the required column names and associated scales for each metric. See <a href="https://tools.tntp.org/confluence/pages/viewpage.action?spaceKey=PROJ&amp;title=Goals+Guidance+Hub#ContractandTeamGoalsHub--248085037" class="external-link">The Goals Guidance Hub</a> for more details. Note that these are the <strong>names</strong> of the columns needed in your data. It doesn’t mean that every row must have a value on each of these variables. It can be okay if some of these variables have NA values for specific rows. For example, K-5 Literacy observations on the IPG require either all of the Core Actions (ca1_a, ca1_b, ca1_c, ca2_overall, ca3_overall) <strong>and/or</strong> rfs_overall. If an observation has all the core actions it still needs a variable called rfs_overall, but the value can be NA.</p>
<ul>
<li>
<strong>Engagement</strong>
<ul>
<li>Metric name to use in package: <code>metric = engagement</code>
</li>
<li>Items: (“<em>We spend time in class on things that…</em>”)
<ul>
<li>eng_interest (“<em>What we were learning was interesting.</em>”)</li>
<li>eng_like (“<em>I liked what we did in class.</em>”)</li>
<li>eng_losttrack (“<em>I was so into what we were learning I lost track of time.</em>”)</li>
<li>eng_moreabout (“<em>I thought more about what we were learning than anything else.</em>”)</li>
</ul>
</li>
<li>Scale: 0 (Not True), 1 (A Little True), 2 (Mostly True), or 3 (Very True).</li>
</ul>
</li>
<li>
<strong>Relevance</strong>
<ul>
<li>Metric name to use in package: <code>metric = relevance</code>
</li>
<li>Items: (“<em>We spend time in class on things that…</em>”)
<ul>
<li>rel_asmuch (“<em>Will help me learn just as much as kids in other schools.</em>”)</li>
<li>rel_future (“<em>Are important to my future goals.</em>”)</li>
<li>rel_outside (“<em>I can use outside of school.</em>”)</li>
<li>rel_rightnow (“<em>Are important to my life right now.</em>”)</li>
</ul>
</li>
<li>Scale: 0 (Not True), 1 (A Little True), 2 (Mostly True), or 3 (Very True).</li>
</ul>
</li>
<li>
<strong>Belonging</strong>
<ul>
<li>Metric name to use in package: <code>metric = belonging</code>
</li>
<li>Items:
<ul>
<li>bel_ideas (“<em>In this class, my ideas really count.</em>”)</li>
<li>tch_interestedideas (“<em>In this class, my teacher is interested in my ideas.</em>”)</li>
<li>bel_fitin (“<em>In this class, I feel like I fit in.</em>”)</li>
<li>tch_problem (“<em>I could talk to my teacher for this class if I had a problem.</em>”)</li>
</ul>
</li>
<li>Scale: 0 (Not True), 1 (A Little True), 2 (Mostly True), or 3 (Very True).</li>
</ul>
</li>
<li>
<strong>Teacher or Leader Expectations - CURRENT Version</strong>
<ul>
<li>Metric name to use in package: <code>metric = expectations</code>
</li>
<li>Items:
<ul>
<li>exp_fairtomaster (“<em>It’s fair to expect students in this class to master these standards by the end of the year.</em>”)</li>
<li>exp_oneyearenough (“<em>One year is enough time for students in this class to master these standards.</em>”)</li>
<li>exp_allstudents (“<em>All students in my class can master the grade-level standards by the end of the year.</em>”)</li>
<li>exp_appropriate (“<em>The standards are appropriate for the students in this class.</em>”)</li>
</ul>
</li>
<li>Scale: 0 (Strongly Disagree), 1 (Disagree), 2 (Somewhat Disagree), 3 (Somewhat Agree), 4 (Agree), and 5 (Strongly Agree).</li>
</ul>
</li>
<li>
<strong>Teacher or Leader Expectations - OLD Version</strong>
<ul>
<li>Metric name to use in package: <code>metric = expectation_old</code>
</li>
<li>Items:
<ul>
<li>exp_allstudents (“<em>All students in my class can master the grade-level standards by the end of the year.</em>”)</li>
<li>exp_toochallenging (“<em>The standards are too challenging for students in my class.</em>”)</li>
<li>exp_oneyear (“<em>One year is enough time for students in my class to master the standards.</em>”)</li>
<li>exp_different (“<em>Students in my class need something different than what is outlined in the standards.</em>”)</li>
<li>exp_overburden (“<em>Students in my class are overburdened by the demands of the standards.</em>”)</li>
<li>exp_began (“<em>Because of where students began the year, I spend nearly all of my time on standards from earlier grades.</em>”)</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>TNTP Core</strong>
<ul>
<li>Metric name to use in package: <code>metric = tntpcore</code>
</li>
<li>Items:
<ul>
<li>ec (“<em>Essential Content</em>”)</li>
<li>ao (“<em>Academic Ownership</em>”)</li>
<li>dl (“<em>Demonstration of Learning</em>”)</li>
<li>cl (“<em>Culture of Learning</em>”)</li>
</ul>
</li>
<li>Scale: 1 (Ineffective), 2 (Minimally Effective), 3 (Developing), 4 (Proficient), 5 (Skillful)</li>
</ul>
</li>
<li>
<strong>IPG</strong>
<ul>
<li>Metric name to use in package: <code>metric = ipg</code>
</li>
<li>Items: All observations need
<ul>
<li>ca1_a (“<em>Core Action 1A</em>”)</li>
<li>ca1_b (“<em>Core Action 1B</em>”)</li>
<li>ca1_c (“<em>Core Action 1C</em>”)</li>
<li>ca2_overall (“<em>Core Action 2 Overall</em>”)</li>
<li>ca3_overall (“<em>Core Action 3 Overall</em>”)</li>
<li>col</li>
</ul>
</li>
<li>Items for K-5 Literacy observations also required are
<ul>
<li>rfs_overall (“<em>Reading Foundation Skills Overall</em>”)</li>
</ul>
</li>
<li>Items for science observations also required are
<ul>
<li>ca1_d (“<em>Core Action 1D</em>”)</li>
<li>ca1_e (“<em>Core Action 1E</em>”)</li>
<li>ca1_f (“<em>Core Action 1F</em>”)</li>
<li>science_filter (<em>“Text”, “Inquiry and Scientific Practice”, “Both”, or “Neither”.</em>)</li>
</ul>
</li>
<li>Other Needed Items are:
<ul>
<li>grade_level (“<em>Numeric grade-level</em>”)</li>
<li>form (“Math”, “Literacy”, “Science”, or “Social Studies”).</li>
</ul>
</li>
<li>Scale: ca1_a, ca1_b, ca1_c, ca1_d, ca1_e, and ca1_f are 0 (No) and 1 (Yes). All other items are 1 (Not Yet), 2 (Somewhat), 3 (Mostly), and 4 (Yes)</li>
<li>Note: RFS Overall is only required if observation data contains K-5 Literacy observations. Core Action 1 D - F are only required if data contains science observations.</li>
</ul>
</li>
<li>
<strong>Grade-Appropriate Assignments</strong>
<ul>
<li>Metric name to use in package: <code>metric = assignments</code>
</li>
<li>Items: content, practice, relevance</li>
<li>Scale: 0 (No Opportunity), 1 (Minimal Opportunity), 2 (Sufficient Opportunity)</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="a-note-about-the-expectations-metric">A note about the expectations metric<a class="anchor" aria-label="anchor" href="#a-note-about-the-expectations-metric"></a>
</h3>
<p>The items used to measure expectations shifted from a collection of six, mostly reverse-coded worded items to four positively worded items. Both expectations metrics are available, with the current 4-item expectations metric known as “expectations” and the older 6-item expectations metric known as “expectations_old”. That is, to use the older 6-item expectations metric in this package set <code>metric = expectations_old</code> and to use the current 4-item expectations metric set <code>metric = expectations</code>.</p>
</div>
<div class="section level3">
<h3 id="a-note-about-the-ipg">A note about the IPG<a class="anchor" aria-label="anchor" href="#a-note-about-the-ipg"></a>
</h3>
<p>The IPG has the most complicated scoring approach of any of the common metrics. That is because it was originally intended as a diagnostic and development (rather than evaluation) tool, has different components based on the subject matter, has indicators on different scales, and can often have layers of skip logic in the online form used to capture the data. Nevertheless, <code>make_metric</code> works just as easily on the IPG as it does on other metrics, but users should be aware of three things:</p>
<ul>
<li>The function expects the Core Action 1 indicators to be on a 0-1 scale, but the other Core Action scores (and RFS Overall and Culture of Learning) to be on a 1-4 scale. This is to make the function work more easily on data coming out of Academic Diagnostic forms, which tend to use these scales. <code>make_metric</code> will automatically place everything on the proper scale.</li>
<li>
<code>make_metric</code> will not account for observations that should be excluded. For example, some Literacy observations were unrateable because they focused on narrative writing. <code>make_metric</code> does not expect any of these type of skip-logic filters that often accompany the online Academic Diagnostic form, so it’s up to the analyst to first exclude observations that should not be included based on the business rules. Similarly, because of the online skip logic, there are occasions where Core Actions 2 and 3 should be set to the lowest possible value because the observer was skipped past the questions. If these values are left as NA, <code>make_metric</code> will return NAs for the overall common metric score. The analyst must apply the appropriate business rules <em>before</em> using <code>make_metric</code>.</li>
</ul>
<p>Because of the somewhat increased complexity, there are additional IPG examples at the end of this vignette.</p>
</div>
</div>
<div class="section level2">
<h2 id="goals-analysis">Goals Analysis<a class="anchor" aria-label="anchor" href="#goals-analysis"></a>
</h2>
<p>In most cases, making the common metric is just an intermediate step to scoring the metric for goals purposes. <code>tntpmetric</code> has two functions that should make all the necessary goals calculations for you. In both cases, <em>you do not need</em> to create the metric ahead of time. Just provide the function your raw data, indicate the metric of interest and type of analysis needed.</p>
<div class="section level3">
<h3 id="calculating-the-average-common-metric-score">Calculating the average common metric score<a class="anchor" aria-label="anchor" href="#calculating-the-average-common-metric-score"></a>
</h3>
<p>If you want to calculate the average common metric score at a single point in time, you can use the function <code>metric_mean</code>. For example, to calculate the average Sense of Belonging score in the initial survey data, simply give it your data and indicate it’s the “belonging” metric. (The <code>by_class</code> option will be discussed below)</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metric_analyses.html">metric_mean</a></span><span class="op">(</span><span class="va">ss_data_initial</span>, metric <span class="op">=</span> <span class="st">"belonging"</span>, by_class <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; [1] "4 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; $`Overall mean`</span>
<span class="co">#&gt;  1       emmean    SE df lower.CL upper.CL</span>
<span class="co">#&gt;  overall    4.9 0.473 25     3.93     5.87</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; Confidence level used: 0.95 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of data points`</span>
<span class="co">#&gt; [1] 996</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of included classes`</span>
<span class="co">#&gt; [1] 26</span></code></pre></div>
<p><code>metric_means</code> estimates this mean using a multilevel model framework, and takes advantage of the R package <code>emmeans</code> to print the output. The overall mean is displayed in the first element of the returned list under <code>emmean</code>. For a more robust result, you are also provided the appropriate Standard Error (<code>SE</code>) and the lower and upper bounds of the 95% Confidence Interval (<code>lower.CL</code> and <code>upper.cl</code>)</p>
</div>
<div class="section level3">
<h3 id="using-the-binary-version-of-the-variable">Using the binary version of the variable<a class="anchor" aria-label="anchor" href="#using-the-binary-version-of-the-variable"></a>
</h3>
<p>The function <code>metric_mean</code> also works on the binary version of the construct. Simply set the option <code>use_binary</code> to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metric_analyses.html">metric_mean</a></span><span class="op">(</span><span class="va">ss_data_initial</span>, metric <span class="op">=</span> <span class="st">"engagement"</span>, use_binary <span class="op">=</span> <span class="cn">T</span>, by_class <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; [1] "6 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; $`Overall mean`</span>
<span class="co">#&gt;  1       emmean     SE   df lower.CL upper.CL</span>
<span class="co">#&gt;  overall  0.238 0.0714 24.9   0.0906    0.385</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; Confidence level used: 0.95 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of data points`</span>
<span class="co">#&gt; [1] 994</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of included classes`</span>
<span class="co">#&gt; [1] 26</span></code></pre></div>
<p>Because the outcome is not a TRUE/FALSE binary, the mean will always be a proportion between 0 and 1. In the above example, the value 0.238 implies that 23.8% of responses in this data set were “engaged”.</p>
</div>
<div class="section level3">
<h3 id="calculating-the-average-common-metric-score-for-different-groups">Calculating the average common metric score for different groups<a class="anchor" aria-label="anchor" href="#calculating-the-average-common-metric-score-for-different-groups"></a>
</h3>
<p>Many projects have equity-based goals that require looking at mean common metric scores for different types of classrooms. For example, the student survey data has a variable <code>class_frl_cat</code> indicating whether the response comes from a class with at least 50% of students receiving free or reduced price lunch or a class where fewer than 50% of students receive FRL. To look at the results for each group, simply include the column name as the <code>equity_group</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metric_analyses.html">metric_mean</a></span><span class="op">(</span><span class="va">ss_data_initial</span>, metric <span class="op">=</span> <span class="st">"belonging"</span>, equity_group <span class="op">=</span> <span class="st">"class_frl_cat"</span>, by_class <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; [1] "4 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; $`Group means`</span>
<span class="co">#&gt;  equity_group     emmean    SE df lower.CL upper.CL</span>
<span class="co">#&gt;  At least 50% FRL   2.87 0.351 24     2.15     3.60</span>
<span class="co">#&gt;  Under 50% FRL      6.93 0.351 24     6.20     7.65</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; Confidence level used: 0.95 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Difference(s) between groups`</span>
<span class="co">#&gt;  contrast                         estimate    SE df t.ratio p.value</span>
<span class="co">#&gt;  At least 50% FRL - Under 50% FRL    -4.05 0.496 24  -8.164  &lt;.0001</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of data points`</span>
<span class="co">#&gt; [1] 996</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of included classes`</span>
<span class="co">#&gt; [1] 26</span></code></pre></div>
<p>Now, the results show the mean for both types of classes, and include another entry to the returned list called “Difference(s) between groups” the calculates the contrast, or the difference between these group means, and gives a standard error and p-value in case it’s of interest. Note that the contrast is always represented as the first group listed minus the second group listed. In this case, because the reported difference is negative, it means that classes with under 50% FRL students tended to have a higher sense of belonging score.</p>
<p>Equity group comparisons work even when there are more than two group values, like in the variable <code>class_soc_cat</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metric_analyses.html">metric_mean</a></span><span class="op">(</span><span class="va">ss_data_initial</span>, metric <span class="op">=</span> <span class="st">"belonging"</span>, equity_group <span class="op">=</span> <span class="st">"class_soc_cat"</span>, by_class <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; [1] "4 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; $`Group means`</span>
<span class="co">#&gt;  equity_group emmean    SE   df lower.CL upper.CL</span>
<span class="co">#&gt;  0-25% SOC      8.01 0.314 22.2     7.36     8.66</span>
<span class="co">#&gt;  26-50% SOC     6.18 0.312 21.8     5.54     6.83</span>
<span class="co">#&gt;  51-75% SOC     4.20 0.312 21.8     3.56     4.85</span>
<span class="co">#&gt;  76-100% SOC    2.12 0.271 22.0     1.56     2.69</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; Confidence level used: 0.95 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Difference(s) between groups`</span>
<span class="co">#&gt;  contrast                     estimate    SE   df t.ratio p.value</span>
<span class="co">#&gt;  (0-25% SOC) - (26-50% SOC)       1.82 0.443 22.0   4.120  0.0024</span>
<span class="co">#&gt;  (0-25% SOC) - (51-75% SOC)       3.80 0.443 22.0   8.590  &lt;.0001</span>
<span class="co">#&gt;  (0-25% SOC) - (76-100% SOC)      5.88 0.415 22.1  14.183  &lt;.0001</span>
<span class="co">#&gt;  (26-50% SOC) - (51-75% SOC)      1.98 0.442 21.8   4.482  0.0010</span>
<span class="co">#&gt;  (26-50% SOC) - (76-100% SOC)     4.06 0.414 21.9   9.814  &lt;.0001</span>
<span class="co">#&gt;  (51-75% SOC) - (76-100% SOC)     2.08 0.414 21.9   5.026  0.0003</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; P value adjustment: tukey method for comparing a family of 4 estimates </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of data points`</span>
<span class="co">#&gt; [1] 996</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of included classes`</span>
<span class="co">#&gt; [1] 26</span></code></pre></div>
<p>Because it’s rare for projects to set equity goals for factors that have many different groups, <code>metric_mean</code> warns you if your <code>equity_group</code> variable has more than 5 categories; usually that means something is wrong with your variable.</p>
</div>
<div class="section level3">
<h3 id="the-by_class-option">The by_class option<a class="anchor" aria-label="anchor" href="#the-by_class-option"></a>
</h3>
<p>Some metrics collect multiple data points from a single class. For example, student surveys will survey multiple students in the same class, and in many cases multiple times. Because different classes will almost surely have a different number of associated data points – some classes might get 10 surveys, while another might get 50 – we need an approach that doesn’t over- or under-represent some classes because of differences in sample sizes. Fortunately, the multilevel models under-girding the the functions in <code>tntpmetrics</code> account for differences in sample sizes between classes automatically. But to make them work, you must have a variable in your data titled class_id representing each classroom’s unique identifier. You must also set <code>by_class = T</code> as we did in the above examples.</p>
<p>If you do not set <code>by_class = T</code> and/or you do not have a class_id variable, <code>metric_mean</code> will not account for differences in sample sizes by class. In cases where you have multiple rows of data associated with the same class, not accounting for class IDs is statistically inappropriate and the standard errors and confidence intervals will likely be too small. Because some projects will surely forget to collect a class ID, <code>metric_means</code> will still give you the results even if you set <code>by_class = F</code> (or do not specify this option, as FALSE is the default), but will warn you about this statistical issue if you are using a metric that is expecting a class ID, like student surveys or assignments:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metric_analyses.html">metric_mean</a></span><span class="op">(</span><span class="va">ss_data_initial</span>, metric <span class="op">=</span> <span class="st">"belonging"</span><span class="op">)</span>
<span class="co">#&gt; Warning: To properly analyze the belonging metric, you should have a variable</span>
<span class="co">#&gt; called class_id in your data, and set by_class = TRUE. If you did not collect</span>
<span class="co">#&gt; a class ID your results might not be appropriate. Contact Cassie Coddington to</span>
<span class="co">#&gt; discuss.</span>
<span class="co">#&gt; [1] "4 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; $`Overall mean`</span>
<span class="co">#&gt;  1       emmean     SE  df lower.CL upper.CL</span>
<span class="co">#&gt;  overall   4.85 0.0794 995     4.69     5.01</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Confidence level used: 0.95 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of data points`</span>
<span class="co">#&gt; [1] 996</span></code></pre></div>
<p>You will not get this warning if you set <code>by_class = F</code> and you are analyzing a metric that is less likely to have multiple responses per class, like expectations or observations.</p>
</div>
<div class="section level3">
<h3 id="calculating-average-growth-over-time">Calculating average growth over time<a class="anchor" aria-label="anchor" href="#calculating-average-growth-over-time"></a>
</h3>
<p>To examine how the average metric score has changed between two time points, use the function <code>metric_growth</code>. This function works the same as <code>metric_mean</code> but expects you to provide two data sets: one for the first time point (<code>data1</code>) and one for the later time point (<code>data2</code>). For example, to look at how engagement has changed over time, we can use:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metric_analyses.html">metric_growth</a></span><span class="op">(</span>
  data1 <span class="op">=</span> <span class="va">ss_data_initial</span>, 
  data2 <span class="op">=</span> <span class="va">ss_data_final</span>, 
  metric <span class="op">=</span> <span class="st">"engagement"</span>, 
  by_class <span class="op">=</span> <span class="cn">T</span>
<span class="op">)</span>
<span class="co">#&gt; [1] "6 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; [1] "2 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; $`Means at each timepoint`</span>
<span class="co">#&gt;  time    emmean     SE   df lower.CL upper.CL</span>
<span class="co">#&gt;  Final    0.326 0.0743 25.3   0.1731    0.479</span>
<span class="co">#&gt;  Initial  0.234 0.0743 25.3   0.0809    0.387</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; Confidence level used: 0.95 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Differences between timepoints`</span>
<span class="co">#&gt;  contrast        estimate     SE   df t.ratio p.value</span>
<span class="co">#&gt;  Final - Initial   0.0922 0.0115 1965   8.035  &lt;.0001</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of data points`</span>
<span class="co">#&gt; [1] 1992</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of included classes`</span>
<span class="co">#&gt; [1] 26</span></code></pre></div>
<p>In this example, the mean engagement score initially was 4.93, but increased to 5.99 by the final data collection. This difference was a growth of 1.06 points.</p>
</div>
<div class="section level3">
<h3 id="using-the-binary-version-of-the-variable-1">Using the binary version of the variable<a class="anchor" aria-label="anchor" href="#using-the-binary-version-of-the-variable-1"></a>
</h3>
<p>The function <code>metric_growth</code> also works on the binary version of the construct. Simply set the option <code>use_binary</code> to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metric_analyses.html">metric_growth</a></span><span class="op">(</span>
  data1 <span class="op">=</span> <span class="va">ss_data_initial</span>, 
  data2 <span class="op">=</span> <span class="va">ss_data_final</span>, 
  metric <span class="op">=</span> <span class="st">"engagement"</span>,
  use_binary <span class="op">=</span> <span class="cn">T</span>,
  by_class <span class="op">=</span> <span class="cn">T</span>
<span class="op">)</span>
<span class="co">#&gt; [1] "6 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; [1] "2 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; $`Means at each timepoint`</span>
<span class="co">#&gt;  time    emmean     SE   df lower.CL upper.CL</span>
<span class="co">#&gt;  Final    0.326 0.0743 25.3   0.1731    0.479</span>
<span class="co">#&gt;  Initial  0.234 0.0743 25.3   0.0809    0.387</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; Confidence level used: 0.95 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Differences between timepoints`</span>
<span class="co">#&gt;  contrast        estimate     SE   df t.ratio p.value</span>
<span class="co">#&gt;  Final - Initial   0.0922 0.0115 1965   8.035  &lt;.0001</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of data points`</span>
<span class="co">#&gt; [1] 1992</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of included classes`</span>
<span class="co">#&gt; [1] 26</span></code></pre></div>
<p>As before, remember that the values represent proportions between 0 and 1. In the example above, 23% of responses in the initial data were engaging and 33% were engaging in the final data. The difference (0.0922) represents about 9 percentage points.</p>
</div>
<div class="section level3">
<h3 id="calculating-differences-in-growth-over-time-between-equity-groups">Calculating differences in growth over time between equity groups<a class="anchor" aria-label="anchor" href="#calculating-differences-in-growth-over-time-between-equity-groups"></a>
</h3>
<p>You can also examine how growth compared between different groups by specifying he equity group:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metric_analyses.html">metric_growth</a></span><span class="op">(</span>
  data1 <span class="op">=</span> <span class="va">ss_data_initial</span>, 
  data2 <span class="op">=</span> <span class="va">ss_data_final</span>, 
  metric <span class="op">=</span> <span class="st">"engagement"</span>,
  equity_group <span class="op">=</span> <span class="st">"class_frl_cat"</span>,
  by_class <span class="op">=</span> <span class="cn">T</span>
<span class="op">)</span>
<span class="co">#&gt; [1] "6 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; [1] "2 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; $`Group means at each timepoint`</span>
<span class="co">#&gt; time = Initial:</span>
<span class="co">#&gt;  equity_group      emmean     SE   df lower.CL upper.CL</span>
<span class="co">#&gt;  At least 50% FRL 0.00365 0.0714 24.6   -0.143    0.151</span>
<span class="co">#&gt;  Under 50% FRL    0.46356 0.0714 24.6    0.316    0.611</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; time = Final:</span>
<span class="co">#&gt;  equity_group      emmean     SE   df lower.CL upper.CL</span>
<span class="co">#&gt;  At least 50% FRL 0.00645 0.0714 24.6   -0.141    0.154</span>
<span class="co">#&gt;  Under 50% FRL    0.64546 0.0714 24.6    0.498    0.793</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; Confidence level used: 0.95 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Differences between groups at each timepoint`</span>
<span class="co">#&gt; time = Initial:</span>
<span class="co">#&gt;  contrast                         estimate    SE   df t.ratio p.value</span>
<span class="co">#&gt;  At least 50% FRL - Under 50% FRL   -0.460 0.101 24.6  -4.557  0.0001</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; time = Final:</span>
<span class="co">#&gt;  contrast                         estimate    SE   df t.ratio p.value</span>
<span class="co">#&gt;  At least 50% FRL - Under 50% FRL   -0.639 0.101 24.6  -6.332  &lt;.0001</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Change in differences between groups over time`</span>
<span class="co">#&gt; contrast = At least 50% FRL - Under 50% FRL:</span>
<span class="co">#&gt;  contrast1       estimate     SE   df t.ratio p.value</span>
<span class="co">#&gt;  Final - Initial   -0.179 0.0226 1965  -7.923  &lt;.0001</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees-of-freedom method: satterthwaite </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of data points`</span>
<span class="co">#&gt; [1] 1992</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of included classes`</span>
<span class="co">#&gt; [1] 26</span></code></pre></div>
<p>In this example, classes with at least 50% of students receiving FRL had an initial engagement score of 2.93, and then grew to 4.02 at the final data collection. Classrooms with under 50% FRL students also grew, from 6.94 to 7.97. Adding this equity_group option will directly show how the difference between the two groups varied at each time point. In this case, classes with at least 50% FRL students had engagement scores that were 4.01 points lower than other classes initially, and 3.95 points lower at the final data collection. The difference of these differences (i.e., -3.95 - -4.01 = 0.0659) is shown in the list element “Change in differences between groups over time”. In this case, this difference is small and not significantly different from 0 (the p-value is 0.48), implying that the gap between these types of classrooms did not change meaningfully over time.</p>
<p>You must have the same group definitions in both data sets, or you’ll get an error:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Renaming FRL class variable so it doesn't match initial data</span>
<span class="va">ss_data_final_error</span> <span class="op">&lt;-</span> <span class="va">ss_data_final</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
    class_frl_cat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span>
      <span class="va">class_frl_cat</span> <span class="op">==</span> <span class="st">"At least 50% FRL"</span>,
      <span class="st">"&gt;= 50% FRL"</span>,
      <span class="va">class_frl_cat</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="fu"><a href="../reference/metric_analyses.html">metric_growth</a></span><span class="op">(</span>
  data1 <span class="op">=</span> <span class="va">ss_data_initial</span>, 
  data2 <span class="op">=</span> <span class="va">ss_data_final_error</span>, 
  metric <span class="op">=</span> <span class="st">"engagement"</span>,
  equity_group <span class="op">=</span> <span class="st">"class_frl_cat"</span>,
  by_class <span class="op">=</span> <span class="cn">T</span>
<span class="op">)</span>
<span class="co">#&gt; [1] "6 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; [1] "2 Row(s) in data were NOT used because missing at least one value needed to create common measure."</span>
<span class="co">#&gt; Error: Some values of equity group are not present in BOTH data sets.</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="ipg-examples">IPG Examples<a class="anchor" aria-label="anchor" href="#ipg-examples"></a>
</h2>
<p>Analyzing IPG data requires additional variables beyond those used directly in scoring the construct. This is because the IPG calculates the construct differently based on the subject and grade-level of the observation. Though some of these calculations are slightly more involved, you can use the functions in <code>tntpmetrics</code> in the same way as the examples above. You just need to make sure that each observation has all the necessary variables.</p>
<div class="section level3">
<h3 id="ipg-data-should-be-long-and-tidy">IPG data should be long and tidy<a class="anchor" aria-label="anchor" href="#ipg-data-should-be-long-and-tidy"></a>
</h3>
<p><code>tntpmetrics</code> expects your IPG data to be long and tidy: each row is a separate observation, and each column should represent just one thing. That is, you should only have one column titled <code>ca2_overall</code> (representing the overall score to Core Action 2); you should not have a separate variable for each subject (i.e., you should not have math2_overall, rlc2_overall, science2_overall, etc.), as this would not be “tidy” because that column now contains information on two things: subjects and core action 2 scores. Instead, you must have a separate column/variable called <code>form</code> in your data indicating the subject on which the IPG was applied. Depending on the project, this might require you to compile all of your IPG data from separate forms in WordPress/Formidable before using the <code>tntpmetrics</code> package.</p>
</div>
<div class="section level3">
<h3 id="additional-needed-variables">Additional needed variables<a class="anchor" aria-label="anchor" href="#additional-needed-variables"></a>
</h3>
<p>When working with the IPG, all observations will need a variable called <code>form</code> which must be “Literacy”, “Math”, “Science”, or “Social Studies”. All observations will also need a variable called <code>grade_level</code>, which is numeric and can range from -1 to 12, where -1 is Pre-K and 0 is Kindergarten.</p>
<p>All literacy observations that take place in a Pre-K to 5th grade classroom must also have a variable called <code>rfs_overall</code> which represents the overall score on the reading foundation skills.</p>
<p>Science observations must have additional Core Action 1 domains <code>ca1_d</code>, <code>ca1_e</code>, and <code>ca1_f</code>. How these additional domains get scored depends on the value to a gatekeeper or filter question from the form: “Did the lesson focus on a text or inquiry and scientific practice (experimentation, application, modeling, analysis, etc.)? Note that “texts” in this context also means other scientifically appropriate mediums of communication, like grade-appropriate videos, data sets, models, etc.“. Thus, all science observations must also have a variable called <code>science_filter</code> which must have values of”Text“,”Inquiry and Scientific Practice“,”Both“, or”Neither".</p>
</div>
<div class="section level3">
<h3 id="calculating-observation-scores">Calculating observation scores<a class="anchor" aria-label="anchor" href="#calculating-observation-scores"></a>
</h3>
<p>If you have all of the needed variables, you can create the overall observation score just as we did in the above examples:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"overall"</span><span class="op">)</span>, <span class="va">col</span>, <span class="va">cm_ipg</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   ca2_overall ca3_overall rfs_overall ca1_overall col cm_ipg</span>
<span class="co">#&gt; 1           4           1          NA           1   2   1.25</span>
<span class="co">#&gt; 2           1           1          NA           1   4   1.00</span>
<span class="co">#&gt; 3           4           1          NA           1   4   1.75</span>
<span class="co">#&gt; 4           1           4          NA           0   3   1.25</span>
<span class="co">#&gt; 5           3           3          NA           1   3   1.75</span>
<span class="co">#&gt; 6           1           3          NA           2   1   1.00</span></code></pre></div>
<p>In the above, notice that Core Actions 2 and 3, and Culture of Learning were rescaled in order to calculate the IPG construct (<code>cm_ipg</code>) but are returned to you in their original scale of 1-4. Additionally, the oveall Core Action 1 score is created as a new variable (<code>ca1_overall</code>) as only the subdomains are included in the original data.</p>
<p>But note what happens if you do not have the variable called <code>form</code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">form</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span>
<span class="co">#&gt; Error: Data is missing the following variable(s): form </span>
<span class="co">#&gt;  Make sure spelling is correct.</span></code></pre></div>
<p>… Or if you don’t have a variable called <code>grade_level</code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">grade_level</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span>
<span class="co">#&gt; Error: Data is missing the following variable(s): grade_level </span>
<span class="co">#&gt;  Make sure spelling is correct.</span></code></pre></div>
<p>… Or if either of these takes unexpected values:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>form <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span>, <span class="st">"Blarg"</span>, <span class="va">form</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span>
<span class="co">#&gt; Error: form variable has values other than Math, Literacy, Science, or Social Studies </span>
<span class="co">#&gt;  Make sure subject options are spelled correctly with correct capitalization.</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>grade_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fl">15</span>, <span class="va">grade_level</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span>
<span class="co">#&gt; Error: grade_level has values other than -1, 0, 1, 2, ...12. </span>
<span class="co">#&gt;  Make sure grade_level variable is an integer between -1 and 13.</span></code></pre></div>
<p>In fact, NAs are not allowed for <code>grade-level</code> or <code>form</code> because they determine how the construct is scored. You will get an error if any of your data rows have NAs in these columns:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>form <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span>, <span class="cn">NA</span>, <span class="va">form</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span>
<span class="co">#&gt; Error in data_scale_check_ipg(data): All observations must have a value for form. NAs are not allowed.</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="missing-ratings">Missing ratings<a class="anchor" aria-label="anchor" href="#missing-ratings"></a>
</h3>
<p><code>tntpmetric</code> will attempt to create an overall IPG score for every observation in your data. However, it can only do so if all the needed domain ratings are included. In cases where an observation is missing a required domain rating – for example, an observation is missing an overall score on Core Action 2 or Culture of Learning – it will return an NA for the overall IPG construct value and tell you how many observations were missing key information.</p>
<p>In the example below, we can see this warning if we purposefully drop some key domain ratings in the data before applying the <code>make_metric</code> function:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
    col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span>, <span class="cn">NA</span>, <span class="va">col</span><span class="op">)</span>,
    ca3_overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">2</span>, <span class="cn">NA</span>, <span class="va">ca3_overall</span><span class="op">)</span>,
    rfs_overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">14</span>, <span class="cn">NA</span>, <span class="va">rfs_overall</span><span class="op">)</span>,
    ca2_overall <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">14</span>, <span class="cn">NA</span>, <span class="va">ca2_overall</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">observation_number</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"overall"</span><span class="op">)</span>, <span class="va">col</span>, <span class="va">cm_ipg</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">14</span><span class="op">)</span>
<span class="co">#&gt; Warning: 1 K-5 Literacy observation(s) were missing an overall RFS score and</span>
<span class="co">#&gt; some Core Actions. These observations need an overall RFS score or all three</span>
<span class="co">#&gt; Core Actions, or both in order to have an overall IPG score calculated.</span>
<span class="co">#&gt; Warning: 1 Observation(s) have a missing score on at least one of the Core</span>
<span class="co">#&gt; Actions. Observations must be rated on all Core Actions in order to have an</span>
<span class="co">#&gt; overall IPG score calculated. In many cases, missing scores should be set to the</span>
<span class="co">#&gt; lowest possible value or, if it's ineligible, the entire observation should be</span>
<span class="co">#&gt; removed before scoring. Check the scoring guide for more details.</span>
<span class="co">#&gt; Warning: 1 Observation(s) have a missing score on Culture of Learning.</span>
<span class="co">#&gt; Observations must be rated on Culture of Learning in order to have an overall</span>
<span class="co">#&gt; IPG score calculated.</span>
<span class="co">#&gt;   observation_number ca2_overall ca3_overall rfs_overall ca1_overall col cm_ipg</span>
<span class="co">#&gt; 1                  1           4           1          NA           1  NA     NA</span>
<span class="co">#&gt; 2                  2           1          NA          NA           1   4     NA</span>
<span class="co">#&gt; 3                  3           4           1          NA           1   4   1.75</span>
<span class="co">#&gt; 4                  4           1           4          NA           0   3   1.25</span>
<span class="co">#&gt; 5                  5           3           3          NA           1   3   1.75</span>
<span class="co">#&gt; 6                 14          NA           2          NA           2   4     NA</span></code></pre></div>
<p>Note that these messages are warnings, and the code will still run. But the affected observatinos now have NAs for their value for the overall construct (<code>cm_ippg</code>).</p>
</div>
<div class="section level3">
<h3 id="science-observation-scores">Science observation scores<a class="anchor" aria-label="anchor" href="#science-observation-scores"></a>
</h3>
<p>The (at the time of this writing) new science IPG form has more Core Action 1 subdomain ratings to account for the variety of lessons science observers might see. <code>tntpmetrics</code> accounts for these scoring approaches, but you must include a variable called <code>science_filter</code> in your data to tell the function which Core Action 1 values to expect. Without this variable, you will get an error:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">form</span> <span class="op">==</span> <span class="st">"Science"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">science_filter</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"ca"</span><span class="op">)</span>, <span class="va">col</span>, <span class="va">cm_ipg</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   science_filter ca1_a ca1_b ca1_c ca1_d ca1_e ca1_f ca2_overall ca3_overall</span>
<span class="co">#&gt; 1           Both     0     1     0     0     0     1           4           1</span>
<span class="co">#&gt; 2        Neither     0     0    NA    NA    NA    NA           1           4</span>
<span class="co">#&gt; 3           Text     1     0     1     1     0    NA           3           3</span>
<span class="co">#&gt; 4           Text     0     1     1     0     0    NA           1           1</span>
<span class="co">#&gt; 5        Neither     0     0    NA    NA    NA    NA           2           3</span>
<span class="co">#&gt; 6           Both     1     0     0     1     0     0           1           2</span>
<span class="co">#&gt;   ca1_overall col cm_ipg</span>
<span class="co">#&gt; 1           1   2   1.25</span>
<span class="co">#&gt; 2           0   3   1.25</span>
<span class="co">#&gt; 3           1   3   1.75</span>
<span class="co">#&gt; 4           1   2   0.50</span>
<span class="co">#&gt; 5           0   2   1.00</span>
<span class="co">#&gt; 6           1   1   0.50</span>

<span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">form</span> <span class="op">==</span> <span class="st">"Science"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">science_filter</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/make_metric.html">make_metric</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span>
<span class="co">#&gt; Error: Data contains science observation(s) but is missing the following variables: science_filter </span>
<span class="co">#&gt;  Make sure they are spelled correctly.</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="ipg-goals">IPG goals<a class="anchor" aria-label="anchor" href="#ipg-goals"></a>
</h3>
<p>If you have all of the needed variables with proper, allowable values, then the functions in <code>tntpmetrics</code> to calculate means (overall or by group) or changes over time work identically to the student survey examples above. For instance:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ipg_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/metric_analyses.html">metric_mean</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"ipg"</span><span class="op">)</span>
<span class="co">#&gt; $`Overall mean`</span>
<span class="co">#&gt;  1       emmean     SE df lower.CL upper.CL</span>
<span class="co">#&gt;  overall   1.44 0.0502 99     1.34     1.54</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Confidence level used: 0.95 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Number of data points`</span>
<span class="co">#&gt; [1] 100</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="questions">Questions?<a class="anchor" aria-label="anchor" href="#questions"></a>
</h2>
<p>Contact Adam Maier or Cassie Coddington with questions.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Adam Maier, Shane Orr.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
